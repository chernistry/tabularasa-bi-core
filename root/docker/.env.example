# TabulaRasa BI Core - Environment Configuration
# Copy this file to .env and customize for your environment
# IMPORTANT: Never commit .env files to version control

# Environment Settings
ENVIRONMENT=development
COMPOSE_PROJECT_NAME=tabularasa-bi

# Database Configuration
POSTGRES_USER=tabulauser
POSTGRES_PASSWORD=tabulapass
POSTGRES_DB=tabularasadb
DB_PORT=5432
DB_MAX_CONNECTIONS=200
DB_SHARED_BUFFERS=256MB
DB_EFFECTIVE_CACHE_SIZE=1GB
DB_WORK_MEM=4MB
DB_MAINTENANCE_WORK_MEM=64MB
DB_WAL_BUFFERS=16MB
DB_CHECKPOINT_COMPLETION_TARGET=0.7
DB_DEFAULT_STATISTICS_TARGET=100

# Database Resource Limits
DB_MEMORY_LIMIT=2G
DB_CPU_LIMIT=2.0
DB_MEMORY_RESERVATION=1G
DB_CPU_RESERVATION=1.0

# Kafka Configuration
KAFKA_PORT=9092
KAFKA_JMX_PORT=9999
KAFKA_ADVERTISED_HOST=localhost
KAFKA_AUTO_CREATE_TOPICS=false
KAFKA_DEFAULT_PARTITIONS=3
KAFKA_REPLICATION_FACTOR=1
KAFKA_MIN_ISR=1
KAFKA_LOG_RETENTION_HOURS=168
KAFKA_LOG_RETENTION_BYTES=1073741824
KAFKA_LOG_SEGMENT_BYTES=134217728
KAFKA_LOG_CLEANUP_POLICY=delete
KAFKA_COMPRESSION_TYPE=snappy
KAFKA_MESSAGE_MAX_BYTES=1048576
KAFKA_REPLICA_FETCH_MAX_BYTES=1048576
KAFKA_SOCKET_SEND_BUFFER=102400
KAFKA_SOCKET_RECEIVE_BUFFER=102400
KAFKA_SOCKET_REQUEST_MAX_BYTES=104857600

# Kafka JVM Settings
KAFKA_HEAP_OPTS=-Xmx1G -Xms1G
KAFKA_JVM_PERFORMANCE_OPTS=-server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35

# Kafka Resource Limits
KAFKA_MEMORY_LIMIT=2G
KAFKA_CPU_LIMIT=2.0
KAFKA_MEMORY_RESERVATION=1G
KAFKA_CPU_RESERVATION=1.0

# Monitoring Configuration
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
JAEGER_UI_PORT=16686
JAEGER_OTLP_GRPC_PORT=4317
JAEGER_OTLP_HTTP_PORT=4318
ALERTMANAGER_PORT=9093

# Application Configuration
APP_PORT=8083
DASHBOARD_PORT=8080
KAFKA_UI_PORT=8088

# Security Settings (Change in Production)
SECRET_KEY=change-this-in-production-to-a-random-64-char-string
JWT_SECRET=change-this-jwt-secret-in-production-use-256-bit-key

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json

# Feature Flags
FEATURE_CIRCUIT_BREAKER=true
FEATURE_TRACING=true
FEATURE_METRICS=true