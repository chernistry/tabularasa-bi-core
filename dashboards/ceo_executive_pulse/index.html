<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEO & Executive Pulse</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="../shared/main.css">
    <script src="../shared/plot-theme.js"></script>
</head>
<body>
    <header class="main-header">
        <a href="../../index.html" class="logo">TabulaRasa<span>.ai</span></a>
        <nav>
            <a href="./index.html" class="active">Executive Pulse</a>
            <a href="../advertiser_campaign_performance/index.html">Advertiser Performance</a>
            <a href="../publisher_health_yield_optimization/index.html">Publisher Yield</a>
            <a href="../bi_pipeline_health_data_trust/index.html">BI Pipeline Health</a>
        </nav>
    </header>

    <div class="dashboard-container">
        <h1 class="dashboard-title">CEO & Executive Pulse</h1>
        <p class="dashboard-subtitle">
            <strong>Narrative for C-Level:</strong> A high-level overview of the business's core vital signs. We are growing faster than the market, and here are the key drivers and strategic focus areas.
        </p>
        
        <div class="kpi-grid">
            <div class="card kpi-card">
                <div class="kpi-label">Total Revenue vs. Forecast</div>
                <div class="kpi-value">$82.5M <span class="unit">/ $80M</span></div>
                <div class="kpi-change positive">+3.1% Ahead</div>
            </div>
            <div class="card kpi-card">
                <div class="kpi-label">New Bookings (YoY Growth)</div>
                <div class="kpi-value">+18.2<span class="unit">%</span></div>
                <div class="kpi-change positive">Trending Up</div>
            </div>
            <div class="card kpi-card">
                <div class="kpi-label">Advertiser ROI Index</div>
                <div class="kpi-value">1.21<span class="unit">x</span></div>
                <div class="kpi-change negative">-2.5% vs. Target</div>
            </div>
            <div class="card kpi-card">
                <div class="kpi-label">Avg. Publisher RPM</div>
                <div class="kpi-value">$7.52</div>
                <div class="kpi-change positive">+5.1% vs. Prev. Qtr</div>
            </div>
        </div>

        <div class="dashboard-grid main-side-layout" style="margin-top: 24px;">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">"Wow" Feature: Global Advertiser ROI Growth</h2>
                    <span class="info-icon" onclick="showModal('map-modal')">ℹ️</span>
                </div>
                <p style="text-align:center; font-style: italic;">Interactive map showing regions where ROI growth is ahead or behind our strategic goals.</p>
                <div id="world-map-chart" class="chart-container" style="min-height: 450px;"></div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Top 5 Publishers by Revenue</h2>
                    <span class="info-icon" onclick="showModal('publisher-modal')">ℹ️</span>
                </div>
                <div id="top-publishers-chart" class="chart-container" style="min-height: 450px;"></div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="map-modal" class="modal"><div class="modal-content"><span class="close-button" onclick="closeModal('map-modal')">&times;</span><h3>Global Advertiser ROI Growth</h3><p>This map visualizes the year-over-year growth of the Advertiser ROI index by country. Green indicates growth above target (5%), while red indicates regions that require strategic attention.</p></div></div>
    <div id="publisher-modal" class="modal"><div class="modal-content"><span class="close-button" onclick="closeModal('publisher-modal')">&times;</span><h3>Top 5 Publishers by Revenue Share</h3><p>This chart shows the contribution of our top five publisher partners to the total revenue for the current quarter. It helps identify key partnerships and concentration risk.</p></div></div>

    <script>
        // --- "Wow" Feature: World Map ---
        const mapLayout = { 
            ...plotTheme, 
            title: { ...plotTheme.title, text: 'YoY Advertiser ROI Growth (%)' },
            geo: {
                scope: 'world',
                projection: { type: 'natural earth' },
                showland: true,
                landcolor: 'rgba(234, 234, 242, 1)',
                subunitcolor: 'rgba(185, 185, 208, 1)',
                bgcolor: 'rgba(255, 255, 255, 0)'
            },
            paper_bgcolor: 'rgba(255, 255, 255, 0)',
            plot_bgcolor: 'rgba(255, 255, 255, 0)'
        };

        Plotly.newPlot('world-map-chart', [{
            type: 'choropleth',
            locations: ['USA', 'DEU', 'GBR', 'BRA', 'AUS', 'JPN', 'IND', 'CAN', 'FRA', 'RUS'],
            z: [5.2, 4.5, 6.8, -1.2, 7.1, 2.5, -0.5, 3.0, 5.5, -2.0], // YoY Growth %
            text: ['USA', 'Germany', 'UK', 'Brazil', 'Australia', 'Japan', 'India', 'Canada', 'France', 'Russia'],
            colorscale: [
                [0, 'rgb(214, 39, 40)'],
                [0.5, 'rgb(255, 193, 7)'],
                [1, 'rgb(44, 160, 44)']
            ],
            colorbar: { title: 'Growth %' }
        }], mapLayout, { responsive: true });

        // --- Top Publishers Chart ---
        const publisherLayout = {
            ...plotTheme,
            title: { ...plotTheme.title, text: 'Quarterly Revenue Share' },
            xaxis: { title: 'Revenue (in M USD)'},
            yaxis: { autorange: 'reversed' } // To show top publisher at the top
        };

        Plotly.newPlot('top-publishers-chart', [{
            x: [15.2, 12.8, 10.1, 8.9, 6.5],
            y: ['Publisher Alpha', 'News Network Inc.', 'Global Media Co.', 'Tech Today', 'Lifestyle Magazine'],
            type: 'bar',
            orientation: 'h',
            marker: { color: plotTheme.colorway }
        }], publisherLayout, { responsive: true });
    </script>

</body>
</html>
