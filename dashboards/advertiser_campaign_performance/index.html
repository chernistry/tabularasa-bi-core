<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advertiser Campaign Performance</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.js"></script>
    <link rel="stylesheet" href="../shared/main.css">
    <script src="../shared/plot-theme.js"></script>
</head>
<body>
    <header class="main-header">
        <a href="../../index.html" class="logo">TabulaRasa<span>.ai</span></a>
        <nav>
            <a href="../ceo_executive_pulse/index.html">Executive Pulse</a>
            <a href="./index.html" class="active">Advertiser Performance</a>
            <a href="../publisher_health_yield_optimization/index.html">Publisher Yield</a>
            <a href="../bi_pipeline_health_data_trust/index.html">BI Pipeline Health</a>
        </nav>
    </header>

    <div class="dashboard-container">
        <h1 class="dashboard-title">Advertiser Campaign Performance</h1>
        <p class="dashboard-subtitle">
            <strong>Narrative for Campaign Managers:</strong> Identifying which campaigns deliver maximum profit and where growth opportunities lie for our clients.
        </p>

        <div class="kpi-grid">
            <div class="card kpi-card">
                <div class="kpi-label">Average Cost Per Acquisition (CPA)</div>
                <div class="kpi-value">$12.50</div>
                <div class="kpi-change negative">-5.2% vs. Target (Higher)</div>
            </div>
            <div class="card kpi-card">
                <div class="kpi-label">Average Return On Ad Spend (ROAS)</div>
                <div class="kpi-value">4.2<span class="unit">x</span></div>
                <div class="kpi-change positive">+10% vs. Target</div>
            </div>
        </div>

        <div class="dashboard-grid main-side-layout" style="margin-top: 24px;">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Conversion Rate Funnel</h2>
                    <span class="info-icon" onclick="showModal('funnel-modal')">ℹ️</span>
                </div>
                <div id="funnel-chart" class="chart-container" style="min-height: 450px;"></div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">"Wow" Feature: Top Converting Keywords</h2>
                    <span class="info-icon" onclick="showModal('wordcloud-modal')">ℹ️</span>
                </div>
                <div class="chart-container" style="display: flex; align-items: center; justify-content: center;">
                    <canvas id="wordcloud-canvas" width="400" height="400"></canvas>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Audience Segment Performance (ROAS)</h2>
                <span class="info-icon" onclick="showModal('segment-modal')">ℹ️</span>
            </div>
            <div id="segment-performance-chart" class="chart-container"></div>
        </div>
    </div>

    <!-- Modals -->
    <div id="funnel-modal" class="modal"><div class="modal-content"><span class="close-button" onclick="closeModal('funnel-modal')">&times;</span><h3>Conversion Rate Funnel</h3><p>This funnel shows the journey from initial ad impression to final conversion, highlighting drop-off rates at each stage.</p></div></div>
    <div id="wordcloud-modal" class="modal"><div class="modal-content"><span class="close-button" onclick="closeModal('wordcloud-modal')">&times;</span><h3>Top Converting Keywords</h3><p>This word cloud visualizes the keywords from search campaigns that are driving the most conversions. The larger the word, the more conversions it generated.</p></div></div>
    <div id="segment-modal" class="modal"><div class="modal-content"><span class="close-button" onclick="closeModal('segment-modal')">&times;</span><h3>Audience Segment Performance</h3><p>This chart compares the Return On Ad Spend (ROAS) across different audience segments, helping to identify the most profitable groups to target.</p></div></div>

    <script>
        // --- Funnel Chart ---
        const funnelLayout = {
            ...plotTheme,
            title: { ...plotTheme.title, text: 'From Impression to Purchase' }
        };
        Plotly.newPlot('funnel-chart', [{
            type: 'funnel',
            y: ['Impressions', 'Clicks', 'Add to Cart', 'Purchase'],
            x: [100000, 15000, 3000, 750],
            textinfo: "value+percent initial",
            marker: { color: plotTheme.colorway }
        }], funnelLayout, { responsive: true });

        // --- Audience Segment Chart ---
        const segmentLayout = {
            ...plotTheme,
            title: { ...plotTheme.title, text: 'ROAS by Audience Segment' },
            xaxis: { title: 'Audience Segment' },
            yaxis: { title: 'ROAS (x)' }
        };
        Plotly.newPlot('segment-performance-chart', [{
            x: ['Tech Enthusiasts', 'Gamers', 'Parents', 'Finance Professionals', 'Students'],
            y: [5.5, 6.2, 3.1, 4.8, 2.5],
            type: 'bar',
            marker: { color: plotTheme.colorway[1] }
        }], segmentLayout, { responsive: true });

        // --- Word Cloud ---
        const list = [
            ['real-time analytics', 55], ['content discovery', 48], ['native advertising', 45],
            ['ad campaign optimization', 35], ['user engagement', 32], ['brand safety', 28],
            ['supply chain visibility', 25], ['b2b marketing', 22], ['programmatic ads', 20],
            ['lead generation', 18], ['saas solutions', 15], ['ecommerce growth', 12]
        ];
        WordCloud(document.getElementById('wordcloud-canvas'), { list: list, weightFactor: 8, fontFamily: 'Segoe UI' });
    </script>
</body>
</html> 